{% extends 'base.html' %}
{% block content %}

<div class="container-fluid text-center">
  <div class="row content">
    <div class="col-sm-2 sidenav">
      <p><a href="#downside">찜닭 </a></p>
      <!-- <tr onclick='location="/food/{{ food.id }}" '>
      </tr> -->
      <!-- 찜닭 버튼을 누르면 밥집 목록이 지도 밑부분에 뜨도록 -->
      
      <p><a href="#downside">카페</a></p>

      <p><a href="#downside">구이</a></p>
    </div>
    <div class="col-sm-8 text-left">
      <h1>먹거리 지도</h1>
      <p> 안동의 다양한 먹거리를 소개합니다 </p>
      <hr>
      <div id="map" style="width:1000px; height:400px; margin:0 auto;"></div>
      <div class="container text-center">
        <script src="http://dapi.kakao.com/v2/maps/sdk.js?appkey=fe4fe669c0e29292e13e253ea4ca331f"></script>
        <script>
          navigator.geolocation.getCurrentPosition(
            function (position) {
              var lat = position.coords.latitude
              var lng = position.coords.longitude
              //alert(lat +','+ lng);
              var container = document.getElementById('map');
              var options = {
                center: new kakao.maps.LatLng(lat, lng), // 안동대
                level: 10
              };
              var map = new kakao.maps.Map(container, options);
              var markerPosition = new kakao.maps.LatLng(lat, lng);
              var marker = new kakao.maps.Marker({
                position: markerPosition
              });
              marker.setMap(map);
              $.ajax({
                url: '/map_data/',
                data: {
                  'lat': lat, 'lng': lng
                },
                success: function (res) {
                  for (var i = 0; i < res.length; i++) {
                    var marker = new kakao.maps.Marker({
                      map: map, // 마커를 표시할 지도
                      position: new kakao.maps.LatLng(res[i].lat, res[i].lng),
                      title: res[i].title,
                    });
                  }
                }
              });
            });

        </script>
        <hr>
        <h3>음식점 목록</h3>
        <li>
          <p id="downside"> </p>
        </li>
        <div class="jumbotron">
          <div class="container text-center">
              <table class="table table-hover">
                  <thead>
                      <tr>
                          <th>번호</th>
                          <th>상호명</th>
                          <th>주소</th>
                          <th>전화번호</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for food in food_point %}
                          <td>{{ food.id }}</td>   <!-- 게시물 번호(PK) -->
                          <td>{{ food.title }}</td>
                          <td>{{ food.location }}</td>     
                          <td>{{ food.tel }}</td>    
                      {% endfor %}
                  </tbody>
              </table>
          </div>
      </div>
        <p>
        </p>
      </div>
      <!-- <div class="col-sm-2 sidenav">
        <div class="well">
          <p>ADS</p>
        </div>
        <div class="well">
          <p>ADS</p>
        </div>
      </div> -->
    </div>
  </div>

{% endblock %}