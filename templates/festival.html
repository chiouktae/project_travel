{% extends 'base.html' %}
{% block content %}
<div class="container-fluid text-center">    
    <div class="row content">
      <div class="col-sm-2 sidenav">  
        <div class="wrapper">
            <ui class="mainMenu">
                <li class="item" id="account">
                    <a href="#account" class="btn"><i class="fas fa-user-circle"></i>안동축제</a>
                    <div class="subMenu">
                        <a href="">안동국제탈춤페스티벌</a>
                        <a href="">월영여행</a>
                        <a href="">암산얼음축제</a>
                        <a href="">안동벚꽃축제</a>
                    </div>
                </li>
                <li class="item">
                    <a href="#" class="btn"><i class="fas fa-sign-out-alt"></i>Log Out</a>
                </li>
            </ui>
        </div>
      </div>

      <div class="col-sm-8 text-left" style="margin-top: 20px;">
        <div style='width: 100%; height: 30px; background-color: darkgray;'>
            <p style="padding-top: 5px; padding-left: 10px; color: cornsilk;">안동탈춤페스티벌</p>
        </div> 

        <div class="jumbotron" style="background-color: #f8f9fa;">
        
        <!-- 지도 -->
        <div class="container text-center">
        <div id="map" style="width:100%; height:400px; margin:0 auto;"></div>
        </div>

        <!-- 상세정보 -->
        <div class="Contents">
            <div class="img-source">
                <img src="https://www.tourandong.com/Public/sub2/images/s1_4img1.jpg" class="img-responsive" style="width:100%" alt="Image">
            </div>

            <div class="text-source">
                <p style="text-align: left;">시기 : 매년 3월 ~ 4월 (벚꽃개화 시기)</p>
                <p style="text-align: left;">장소 :   안동 낙동강변 벚꽃길에서</p>
                <p style="text-align: left;">장소 :   안동 낙동강변 벚꽃길에서</p>
                <p style="text-align: left;">내용 :   야간 조명쇼, 네온아트 전시, 조명터널, 포토존, 풍물시장과 안동의 음식, 거리공연 등</p>
            </div>
        </div>

        </div>
        <script src="http://dapi.kakao.com/v2/maps/sdk.js?appkey=fe4fe669c0e29292e13e253ea4ca331f"></script>
        <script>
          navigator.geolocation.getCurrentPosition(
              function(position) {
                  var lat = position.coords.latitude
                  var lng = position.coords.longitude
                  //alert(lat +','+ lng);
                  var container = document.getElementById('map');
                  var options = {
                  center : new kakao.maps.LatLng(lat, lng), // 안동대
                  level : 10
                  };
                  var map = new kakao.maps.Map(container, options);
                  var markerPosition = new kakao.maps.LatLng(lat, lng);
                  var marker = new kakao.maps.Marker({
                  position: markerPosition
                  });
                  marker.setMap(map);
                  
                  $.ajax({
                    url: '/fes_map/',
                    data: {},
                    success: function (res) {
                      for (var i = 0; i < res.length; i++) {
                          var marker = new kakao.maps.Marker({
                            map: map, // 마커를 표시할 지도
                            position: new kakao.maps.LatLng(res[i].lat, res[i].lng),
                            title: res[i].title,
                          });

                          var iwContent = `<div style="padding:5px;">▶${res[i].title}◀</div>`, // 인포윈도우에 표출될 내용
                          iwRemoveable = true; // 인포윈도우 닫을 수 있는 x버튼

                          (function(m) {
                            // 인포윈도우
                            var infowindow = new kakao.maps.InfoWindow({
                                content : iwContent,
                                removable : iwRemoveable
                            });

                            // 마커 클릭이벤트
                            kakao.maps.event.addListener(m, 'click', function() {
                                  infowindow.open(map, m);  
                            });
                          })(marker);

                      }
                    }
                  });

              })
          </script>
      </div>

      <div class="col-sm-2 sidenav" style="top:20px;">
        <div class="well">
          <p>ADS</p>
        </div>
        <div class="well">
          <p>ADS</p>
        </div>
      </div>
    </div>
  </div>
{% endblock %}