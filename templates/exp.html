{% extends 'base.html' %}
{% block content %}

<div class="container-fluid text-center">    
    <div class="row content">
      <div class="col-sm-2 sidenav">
        <p><a href="#">Link</a></p>
        <p><a href="#">Link</a></p>
        <p><a href="#">Link</a></p>
      </div>
      <div class="col-sm-8 text-left">    
        <h1>Welcome</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        <hr> 
        <div class="container text-center">
          <div id="map" style="width:100%; margin:0 auto;"></div>
          <script src="http://dapi.kakao.com/v2/maps/sdk.js?appkey=fe4fe669c0e29292e13e253ea4ca331f"></script>
          <script>
          navigator.geolocation.getCurrentPosition(
              function(position) {
                  var lat = position.coords.latitude
                  var lng = position.coords.longitude
                  //alert(lat +','+ lng);
                  var container = document.getElementById('map');
                  var options = {
                  center : new kakao.maps.LatLng(lat, lng), // 안동대
                  level : 13
                  };
                  var map = new kakao.maps.Map(container, options);
                  var markerPosition = new kakao.maps.LatLng(lat, lng);
                  var marker = new kakao.maps.Marker({
                  position: markerPosition
                  });
                  marker.setMap(map);
            

              $.ajax({
                  url: '/map_data/',
                  data: {
                      'lat' : lat, 'lng' : lng
                  },
                  success: function(res) {
                      for(var i = 0; i < res.length; i++) {
                          var marker = new kakao.maps.Marker({
                              map : map, // 마커를 표시할 지도
                              position : new kakao.maps.LatLng(res[i].lat, res[i].lng),
                              title : res[i].title,
                          });
                      }
                  }
              });
          });

          </script>
          </div>
      </div>
      <div class="col-sm-2 sidenav">
        <div class="well">
          <p>ADS</p>
        </div>
        <div class="well">
          <p>ADS</p>
        </div>
      </div>
    </div>
  </div>

{% endblock %}